check process resque_worker_<%= @worker %>
  with pidfile "<%= @deploy[:deploy_to] %>/shared/pids/grantoo_resque_<%= @worker %>.pid"
  start program = "/usr/bin/env HOME=/home/user PATH=/usr/local/bin:/usr/bin:/bin:$PATH /bin/sh -l -c 'cd <%= @deploy[:deploy_to] %>/current; RAILS_ENV=<%= @deploy[:rails_env] %> QUEUE=* VERBOSE=1 PIDFILE=<%= @deploy[:deploy_to] %>/shared/pids/grantoo_resque_<%= @worker %>.pid nohup bundle exec rake environment resque:work >><%= @deploy[:deploy_to] %>/shared/log/resque_worker.log 2>&1'" as uid deploy and gid <%= @group %>
  stop program = "/bin/sh -c 'cd <%= @deploy[:deploy_to] %>/current && kill -9 $(cat "<%= @deploy[:deploy_to] %>/shared/pids/grantoo_resque_<%= @worker %>.pid") && rm -f "<%= @deploy[:deploy_to] %>/shared/pids/grantoo_resque_<%= @worker %>.pid"; exit 0;'"
  if totalmem is greater than 500 MB for 10 cycles then restart # eating up memory?
  group resque_workers

